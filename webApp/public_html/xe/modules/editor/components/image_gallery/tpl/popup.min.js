var selected_node=null;
function getSlideShow(){var b,a,d="",c,e,f,g;if("undefined"!=typeof opener&&(b=opener.editorPrevNode,a=jQuery(b),a.is("img")&&(selected_node=b,d=a.width(),b=a.attr("gallery_style"),c=a.attr("gallery_align")||"center",e=a.attr("border_color"),f=a.attr("bg_color"),g=a.attr("border_thickness")||1,get_by_id("width").value=d,get_by_id("gallery_style").selectedIndex="list"==b?1:0,get_by_id("gallery_align").selectedIndex="left"==c?1:"right"==c?2:0,get_by_id("border_thickness").value=g,get_by_id("border_color_input").value=
e,get_by_id("bg_color_input").value=f,d=a.attr("images_list")),a=get_by_id("fo").editor_sequence.value,a=opener.get_by_id("uploaded_file_list_"+a))){b=get_by_id("image_list");for(c=0;c<a.length;c++){e=a.options[c];f=e.value;if(!f)break;f=opener.uploadedFiles[f].download_url.replace(request_uri,"");/(jpg|jpeg|gif|png)$/i.test(f)&&(g=!1,-1!=d.indexOf(f)&&(g=!0),e=new Option(e.text,e.value,!1,g),b.options.add(e))}}}
function insertSlideShow(){if("undefined"!=typeof opener){for(var b=[],a=get_by_id("image_list"),d=0;d<a.length;d++){var c=a.options[d];c.selected&&(c=opener.uploadedFiles[c.value].download_url.replace(request_uri,""),b[b.length]=c)}if(b.length){for(var a=get_by_id("width").value,c=get_by_id("gallery_style").options[get_by_id("gallery_style").selectedIndex].value,e=get_by_id("gallery_align").options[get_by_id("gallery_align").selectedIndex].value,f=get_by_id("border_thickness").value,g=get_by_id("border_color_input").value,
j=get_by_id("bg_color_input").value,h="",d=0;d<b.length;d++)h+=b[d].trim()+" ";selected_node?(selected_node.setAttribute("width",a),selected_node.setAttribute("gallery_style",c),selected_node.setAttribute("align",e),selected_node.setAttribute("gallery_align",e),selected_node.setAttribute("border_thickness",f),selected_node.setAttribute("border_color",g),selected_node.setAttribute("bg_color",j),selected_node.setAttribute("images_list",h),selected_node.style.width=a+"px"):(b='<img src="../../../../common/img/blank.gif" editor_component="image_gallery" width="'+
a+'" gallery_style="'+c+'" align="'+e+'" gallery_align="'+e+'" border_thickness="'+f+'" border_color="'+g+'" bg_color="'+j+'" style="width:'+a+'px;border:2px dotted #4371B9;background:url(./modules/editor/components/image_gallery/tpl/image_gallery_component.gif) no-repeat center;" images_list="'+h+'" />',opener.editorFocus(opener.editorPrevSrl),d=opener.editorGetIFrame(opener.editorPrevSrl),opener.editorReplaceHTML(d,b));opener.editorFocus(opener.editorPrevSrl)}window.close()}}
function select_color(b,a){get_by_id(b+"_preview_color").style.backgroundColor="#"+a;get_by_id(b+"_color_input").value=a}jQuery(function(){getSlideShow()});
